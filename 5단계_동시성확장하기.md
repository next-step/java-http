# ğŸš€ 5ë‹¨ê³„ - ë™ì‹œì„± í™•ì¥í•˜ê¸°

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
### 1. Executorsë¡œ Thread Pool ì ìš©
Connector í´ë˜ìŠ¤ì˜ void process(final Socket connection) ë©”ì„œë“œì—ì„œ ìš”ì²­ë§ˆë‹¤ ìŠ¤ë ˆë“œë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê³  ìˆë‹¤.
Connector í´ë˜ìŠ¤ì—ì„œ Executors í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ExecutorService ê°ì²´ë¥¼ ë§Œë“¤ì–´ë³´ì.
ìŠ¤ë ˆë“œ ê°¯ìˆ˜ëŠ” maxThreadsë¼ëŠ” ë³€ìˆ˜ë¡œ ì§€ì •í•œë‹¤.
```java
// maxThreadsë¥¼ ì¶”ê°€í–ˆë‹¤.
public Connector(final Container container, final int port, final int acceptCount, final int maxThreads) {
    // ìƒì„±ìì—ì„œ ìŠ¤ë ˆë“œ í’€ ìƒì„±
}
```

- ìƒê°í•´ë³´ê¸° ğŸ¤”
acceptCountì™€ maxThreadsëŠ” ê°ê° ì–´ë–¤ ì„¤ì •ì¼ê¹Œ?
ìµœëŒ€ ThradPoolì˜ í¬ê¸°ëŠ” 250, ëª¨ë“  Threadê°€ ì‚¬ìš© ì¤‘ì¸(Busy) ìƒíƒœì´ë©´ 100ëª…ê¹Œì§€ ëŒ€ê¸° ìƒíƒœë¡œ ë§Œë“¤ë ¤ë©´ ì–´ë–»ê²Œ í• ê¹Œ?

```markdown
- acceptCount: core thread ìˆ˜ ì´ìƒì˜ ìš”ì²­ì¼ ë“¤ì–´ì˜¬ ë•Œ ëŒ€ê¸°í•˜ê²Œ ë˜ëŠ” queue ì˜ capacity
- maxThreads: ìš”ì²­ì„ ì²˜ë¦¬í•  thread ìµœëŒ€ ê°’
```
```java
ExecutorService executorService = new ThreadPoolExecutor(
            200,
            250, // maxThreads
            0L,
            TimeUnit.MILLISECONDS,
            new ArrayBlockingQueue<>(100) // acceptCount
        );
```

[x] maxThreadPool, coreThreadPool, queueCapacity ë¥¼ ì„¤ì •í•œ ExecuterService ë¥¼ ì ìš©í•œë‹¤

### 2. ë™ì‹œ ì»¬ë ‰ì…˜ ì‚¬ìš©í•˜ê¸°
SessionManager í´ë˜ìŠ¤ì—ì„œ Session ì»¬ë ‰ì…˜ì€ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ Session ì»¬ë ‰ì…˜ì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•˜ì—¬ ì½ê³  ì“°ë‹¤ë³´ë©´ ìŠ¤ë ˆë“œ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ê¸° ì–´ë µë‹¤.
ë™ì‹œì„± ì»¬ë ‰ì…˜(Concurrent Collections)ì„ ì ìš©í•´ì„œ ìŠ¤ë ˆë“œ ì•ˆì •ì„±ê³¼ ì›ìì„±ì„ ë³´ì¥í•´ë³´ì.

[x] SessionManager ì—ì„œ ë™ì‹œì„± ì»¬ë ‰ì…˜ì„ ì ìš©í•œë‹¤
```java
private static final Map<String, HttpSession> SESSIONS = new ConcurrentHashMap<>();
```